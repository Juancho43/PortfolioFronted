<div class="JoinContainer">
  <legend>Etiquetas</legend>
  <div class="Buttons">
    <button type="button" (click)="toggleShow()">
      @if (show()) {
        Ocultar etiquetas
      } @else {
        Mostrar etiquetas
      }
    </button>
    <button type="reset" (click)="reset()">Limpiar tags</button>
  </div>

@if (show()) {
  <div>
    <div class="Container">
      @for (tag of currentTags(); track $index) {
        <app-tag [tag]="tag" />
        <p (click)="editTag(tag)">Editar</p>
        <p (click)="removeTag(tag)">Eliminar</p>
      }
    </div>

    <div class="Buttons">
      <button type="button" (click)="toggleShowSearch()">
        @if (showSearch()) {
          Ocultar busqueda
        } @else {
          Mostrar busqueda
        }
      </button>
      <button type="button" (click)="toggleShowForm()">
        @if (showForm()) {
          Ocultar formulario
        } @else {
          Mostrar formulario
        }
      </button>
    </div>

    @if (showSearch()) {
      <app-tag-searcher (tagSelected)="addTag($event)" />
    }
    @if (showForm()) {
      <app-tag-mini-form
        [currentTag]="selectedTag()!"
        (tagUpdated)="updateTag($event)"
        (tagCreated)="addTag($event)"
        (cleaned)="handleClearForm()"
      />
    }
  </div>
}
</div>
